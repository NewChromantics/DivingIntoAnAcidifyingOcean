<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="Web/win95.css" />
	<link rel="stylesheet" type="text/css" href="Web/Hud.css" />
<style>

	body
	{
		font-family:		'Lato', sans-serif;
		font-weight:  		300;
		overflow:			hidden;

		background-color:	#000;
		color:				#ccc;	/* text colour */
	}

	#Hud
	{
		pointer-events:	none;
		/*	need a static position to make z index work */
		position:		relative;
		z-index:		50;
	}

	input
	{
		/* always allow pointer events on inputs */
		pointer-events:	auto !important;
	}

</style>
</head>
<body>

	<div id="Hud">
		<!--
		<div id="About"> About </div>
		
		<div id="IconSubtitles"><img src="Web/icons/Subtitles.svg"></div>
		 <div id="SubIconText"> Enable subtitles</div>
		 
		 <div id="IconSubtitles_Enable"><img src="Web/icons/Subtitles_Enable.svg"></div>
		 <div id="SubIconText">Disable subtitles</div>
		 <div id="IconSubtitles_Disable"><img src="Web/icons/Subtitles_Disable.svg"></div>
		
		<span id="Subtitle_Line"> </span>
		-->

		
		<div id="Logo">
			<!--<div id="TitleText">ACIDIC OCEAN</div>-->
			<div id="LogoBg">&nbsp;</div>
			<div id="Hint_Start">S T A R T</div>
			<div id="Hint_StartXr">XR Version</div>

			<div id="Hint_Headphones"> Use headphones for a better experience </div>
			<div id="IconHeadphones"> <img src="Web/icons/Headphones.svg"> </div>
		</div><!-- Logo screen -->

		<div id="Experience">
			<div ><span id="SubtitleLabel">Subtitles</span></div>
			<div id="SubtitleSkip">Skip section</div>

			<div id="TimelineContainer">
				<input type=range id="YearSlider" min=1900 max=2600 oninput="MoveWithThumb(this);" onchange="MoveWithThumb(this);"/>
				
				<div id="YearLabelBox"><div id="YearLabel">XXXX</div></div>
				<div id="YearStart">1860</div>
				<div id="YearEnd">2100</div>
				<script>
					function MoveWithThumb(Slider,LabelName='YearLabel')
					{
						const Label = document.getElementById(LabelName);
						const SliderTime = (Slider.valueAsNumber-Slider.min) / (Slider.max-Slider.min);
						Label.innerText = Slider.value;
						Label.style.left = (SliderTime*100) + '%';
					};
					//	init
					const Slider = document.getElementById('YearSlider');
					MoveWithThumb(Slider);
				</script>
			</div>
			
			<div id="Stats">
				<div id="Stats_Temp"><strong>Temperature:</strong> +<span id="Stats_Temp_Label">XXX</span>&deg;C</div>
				<div id="Stats_Co2"><strong>CO2 Intake:</strong> <span id="Stats_Co2_Label">XXX</span>% more</div>
				<div id="Stats_Oxygen"><strong>Oxygen Level:</strong> <span id="Stats_Oxygen_Label">-X.X</span>%</div>
				<div id="Stats_Ph"><strong>pH acidity:</strong> <span id="Stats_Ph_Label">X</span>% more</div>
			</div>
			

			<div id="Hint_ClickAnimal">Click on the animal to select it</div>
			<div id="Hint_DragTimeline">Drag the timeline to explore</div>
			
			<div id="AnimalCard">
				<div id="AnimalCard_Title">JELLYFISH</div>
				
				<div id="AnimalCard_Description">
					<h1> Bubblegum coral appear comfortable nearly everywhere outside of the tropics â€“ where they can grow between 200 and 1300m of depth. </h1>
					<h2> Deep-water corals are damaged beep-water corals are damaged beep-water corals are damaged beep-water corals are damaged beep-water corals are damaged beep-water corals are damaged by a number of things: deep-water trawling, long line fishing, and oil and gas exploration. </h2>
					<h2> Like aragonitic corals, bubblegum corals are likely to be affected by changes in calcite saturation with depth. </h2>
					
				</div>
				<div id="Continue">Continue</div>
				
			</div>
		</div><!-- experience -->

		
		<div id="Solution">
			
			<div>The only way to stop ocean acidification is to reduce our carbon footprint.</div>
			<div>Here are some tips:</div>
		
			<div id="Solution_Tips">
				<div id="Solution_Recycle">Recycle</div>
				<div id="Solution_Walk">Walk &amp; Bike</div>
				<div id="Solution_CleanEnergy">Support &amp; use<br/>clean energy</div>
				<div id="Solution_EnergyEff">Use energy efficient<br/>electronics in your home</div>
				<div id="Solution_EatLocal">Eat locally-produced<br/>and organic food</div>
				<div id="Solution_GrowTree">Grow trees<br/> &amp; plants</div>
			</div>
			
			<div id="Solution_WorldText">We have laid eyes only on 5% of the Oceans even though the Earth's surface is made of 71% of water and the oceans hold about 96.5% of all the Earth's water.</div>
			<div id="Solution_WorldIcon">&nbsp;</div>
			
			
		</div><!-- solution -->
		
		<div id="Debug">
			<div id="Debug_State">State ?</div>
			<div id="Debug_AudioMusic">Music: <span id="AudioMusicLabel">Track</span></div>
			<div id="Debug_AudioMusic2">Music2: <span id="AudioMusic2Label">Track</span></div>
			<div id="Debug_AudioVoice">Voice: <span id="AudioVoiceLabel">Voice</span></div>
			<div id="Debug_VisibleActors">Debug_VisibleActors</div>
			<div id="Debug_RenderedActors">Debug_RenderedActors</div>
			<div id="Debug_FrameRate">X FPS</div>
			<div id="Debug_RenderStats">Debug_RenderStats</div>
			<div id="Debug_TextureHeap">Debug_MemoryUsage</div>
			<div id="Debug_GeometryHeap">Debug_GeometryHeap</div>
		</div><!-- Debug -->
	</div>
	
	<script src='PopEngineCommon/PopWebApi.js'></script>
	<script src='PopEngineCommon/PopApi.js'></script>
	<script src='PopEngineCommon/PopWebOpenglApi.js'></script>
	<script src='PopEngineCommon/PopWebGuiApi.js'></script>
	<script src='PopEngineCommon/PopWebImageApi.js'></script>
	<script src='PopEngineCommon/PopWebSocketApi.js'></script>
	<script src='PopEngineCommon/PopWebXrApi.js'></script>
	<script>
		
		async function Bootup()
		{
			const AsyncAssetLoads = Pop.GetExeArguments().includes('AsyncAssets');
						
			const PreloadAssets =
			[
			 //'ConvertAssets.js',
			 
			 'Editor.js',
			 
				'bootup.js',
				'Logo.js',
				'Actors.js',
				'AssetManager.js',
				'AssetImport.js',
			 'Hud.js',
			 'ParticleActor.js',

			 'Timeline.js',
			 'Animals.js',
			 'PopEngineCommon/PopApi.js',
			 'PopEngineCommon/PopShaderCache.js',
			 'PopEngineCommon/PopFrameCounter.js',
			 'PopEngineCommon/PopMath.js',
			 'PopEngineCommon/ParamsWindow.js',
			 'PopEngineCommon/PopTexture.js',
			 
			 'PopEngineCommon/PopCinema4d.js',
			 'PopEngineCommon/PopCollada.js',
			 'PopEngineCommon/PopPly.js',
			 'PopEngineCommon/PopObj.js',
			 'PopEngineCommon/PopSvg.js',

			 'BlitCopy.frag.glsl',
			 'PhysicsIteration_UpdateVelocity.frag.glsl',
			 'PhysicsIteration_UpdatePosition.frag.glsl',
			 'PhysicsIteration_UpdateVelocityPulse.frag.glsl',
			 'ParticleTriangles.vert.glsl',
			 'Quad.vert.glsl',
			 'Logo/Logo_PhysicsIteration_UpdateVelocity.frag.glsl',
			 'Logo/Logo_PhysicsIteration_UpdatePosition.frag.glsl',
			 'Logo/LogoParticle.frag.glsl',
			 'Logo/LogoParticle.vert.glsl',
			 'Logo/LogoSdf.frag.glsl',
			 'Logo/Logo.svg.json',
			 
			 'Animals.json'
			 //'Logo/Logo.geometry.json'
			 
			 ,'Ocean/ocean_pts.0001.ply'
			];
			
			//	queue up dependencies for bootup
			if ( AsyncAssetLoads )
			{
				//	trigger all then wait for them all to finish
				const AssetPromises = [];
				const Load = function(Filename)
				{
					const Promise = Pop.AsyncCacheAssetAsString(Filename);
					AssetPromises.push( Promise );
				}
				PreloadAssets.forEach( Load );
				await Promise.all( AssetPromises );
			}
			else
			{
				//	await one by one
				for ( let i=0;	i<PreloadAssets.length;	i++ )
				{
					const Filename = PreloadAssets[i];
					await Pop.AsyncCacheAssetAsString(Filename);
				}
			}
			
			//	these need to finish for bootup
			let Source = await Pop.LoadFileAsStringAsync('bootup.js');
			Pop.CompileAndRun( Source, 'bootup.js' );
		}

		Bootup().then( e=>Pop.Debug("Finished!",e) ).catch( console.error );
	
	</script>
	
</body>

