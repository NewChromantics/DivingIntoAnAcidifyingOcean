<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Karla&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="Web/win95.css" />
	<link rel="stylesheet" type="text/css" href="Web/Hud.css" />
<style>

	body
	{
		font-family:		'Karla', sans-serif;
		font-style:			bold;
		overflow:			hidden;

		background-color:	#000;
		color:				#ccc;	/* text colour */
	}

	#Hud
	{
		pointer-events:	none;
		/*	need a static position to make z index work */
		position:		relative;
		z-index:		50;
	}

	input
	{
		/* always allow pointer events on inputs */
		pointer-events:	auto !important;
	}

</style>
</head>
<body>

	<div id="Hud">
		<div id="AudioMusic">Music: <span id="AudioMusicLabel">Track</span></div>
		<div id="AudioVoice">Voice: <span id="AudioVoiceLabel">Voice</span></div>
		<div ><span id="SubtitleLabel">Subtitles</span></div>

		<div id="Timeline"><input type=range id="YearSlider" /></div>
		<div id="Year">Year: <span id="YearLabel">000</span></div>

		<div id="Stats">
			<div id="Stats_Temp">Temperature: <span id="Stats_Temp_Label">XXX</span>&deg;C</div>
			<div id="Stats_Co2">CO2 Intake: <span id="Stats_Co2_Label">XXX</span>% More</div>
			<div id="Stats_Oxygen">Oxygen Level: <span id="Stats_Oxygen_Label">-X.XX</span>%</div>
			<div id="Stats_Ph">pH acidity: <span id="Stats_Ph_Label">X</span>% more</div>
		</div>
		<div id="YearStart">1860</div>	
		<div id="YearEnd">2100</div>

		<div id="TitleText">DIVING INTO AN ACIDIC OCEAN</div>
		<div id="Hint_Start">Start</div><!-- gr: will change this to a button -->

		<div id="Hint_Headphones">Use headphones for a better experience</div>
		<div id="IconHeadphones"><img src="Web/icons/Headphones.png"></div>

		<div id="Hint_TapAnimal"><img src="Web/icons/Mobile_Animal.png">Tap on the animal to select it</div>
		<div id="Hint_ClickAnimal"><img src="Web/icons/Desktop_Animal.png">Click on the animal to select it</div>
		<div id="Hint_DragTimeline_Mobile"><img src="Web/icons/Mobile_Timeline.png">Drag the timeline to explore</div>
		<div id="Hint_DragTimeline_Desktop"><img src="Web/icons/Desktop_Timeline.png">Drag the timeline to explore</div>
		<div id="Hint_TouchToInteract"><img src="Web/icons/Mobile_swirls.png">Touch to interact</div>

		<div id="AnimalCard"><span id="AnimalCard_Title">Animal</span><span id="AnimalCard_Description">Long description</span></div>

	</div>
	
	<script src='PopEngineCommon/PopWebApi.js'></script>
	<script src='PopEngineCommon/PopWebOpenglApi.js'></script>
	<script src='PopEngineCommon/PopWebGuiApi.js'></script>
	<script src='PopEngineCommon/PopWebImageApi.js'></script>
	<script>
		
		async function Bootup()
		{
			const HideHud = function(Name)
			{
				const Element = document.getElementById(Name);
				Element.style.visibility = 'hidden';
			}
			const HiddenElements =
			[
			 'AudioMusic',
			 'AudioVoice',
			 'SubtitleLabel',
			 'YearSlider',
			 'Timeline',
			 'Year',
			 'Stats',
			 'Hint_Start',
			 'Hint_Headphones',
			 'IconHeadphones',
			 'Hint_TapAnimal',
			 'Hint_ClickAnimal',
			 'Hint_DragTimeline_Mobile',
			 'Hint_DragTimeline_Desktop',
			 'Hint_TouchToInteract',
			 'AnimalCard'
			];
			HiddenElements.forEach( HideHud );
			
			const AsyncAssetLoads = Pop.GetExeArguments().includes('AsyncAssets');
			
			
			const PreloadAssets =
			[
				'bootup.js',
				'Logo.js',
			 
			 	'Hud.js',
				'PopEngineCommon/PopShaderCache.js',
				'PopEngineCommon/PopFrameCounter.js',
				'PopEngineCommon/PopMath.js',
				'PopEngineCommon/ParamsWindow.js',
			 
				'PopEngineCommon/PopCinema4d.js',
				'CameraSpline.c4d.xml.json'			 
			];
			
			//	queue up dependencies for bootup
			if ( AsyncAssetLoads )
			{
				//	trigger all then wait for them all to finish
				const AssetPromises = [];
				const Load = function(Filename)
				{
					const Promise = Pop.AsyncCacheAssetAsString(Filename);
					AssetPromises.push( Promise );
				}
				PreloadAssets.forEach( Load );
				await Promise.all( AssetPromises );
			}
			else
			{
				//	await one by one
				for ( let i=0;	i<PreloadAssets.length;	i++ )
				{
					const Filename = PreloadAssets[i];
					await Pop.AsyncCacheAssetAsString(Filename);
				}
			}
			
			//	these need to finish for bootup
			let Source = await Pop.LoadFileAsStringAsync('bootup.js');
			Pop.CompileAndRun( Source, 'bootup.js' );
		}

		Bootup().then( e=>Pop.Debug("Finished!",e) ).catch( console.error );
	
	</script>
	
</body>

