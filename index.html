<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="Web/win95.css">
</head>
<body>

	<script src='PopEngineCommon/PopWebApi.js'></script>
	<script src='PopEngineCommon/PopWebOpenglApi.js'></script>
	<script src='PopEngineCommon/PopWebGuiApi.js'></script>
	<script src='PopEngineCommon/PopWebImageApi.js'></script>
	<script>
		
		async function Bootup()
		{
			//	preload some assets that we don't load asynchronously
			let AssetPromises = [];
			let Load = async function(Filename)
			{
				//	can either await each one, or accumulate
				await Pop.AsyncCacheAssetAsString(Filename);
				//let Promise = Pop.AsyncCacheAssetAsString(Filename);
				//AssetPromises.push( Promise );
			}
			Load('Timeline.json');
			Load('CameraSpline.dae.json');
			
			for ( let i=1;	i<=4;	i++ )
			{
				//Load('Ocean/ocean_pts.' + (''+i).padStart(4,'0') + '.ply');
			}
			for ( let i=1;	i<=10;	i++ )
			{
				Load('Ocean/ocean_pts.' + (''+i).padStart(4,'0') + '.ply.mesh.json');
			}
			
			Load('Shell/shellFromBlender.obj');
			Load('Quad.vert.glsl');
			Load('ParticleTriangles.vert.glsl');
			Load('ParticleColour.frag.glsl');
			Load('BlitCopy.frag.glsl');
			Load('Geo.vert.glsl');
			Load('Colour.frag.glsl');
			Load('Edge.frag.glsl');
			Load('PhysicsIteration_UpdateVelocity.frag.glsl');
			Load('PhysicsIteration_UpdatePosition.frag.glsl');

			Load('AssetManager.js');
			Load('PopEngineCommon/PopShaderCache.js');
			Load('PopEngineCommon/PopFrameCounter.js');
			Load('PopEngineCommon/PopCamera.js');
			Load('PopEngineCommon/PopMath.js');
			Load('PopEngineCommon/ParamsWindow.js');
			Load('PopEngineCommon/PopPly.js');
			Load('PopEngineCommon/PopObj.js');
			Load('PopEngineCommon/PopCollada.js');
			Load('PopEngineCommon/PopTexture.js');
			Load('Noise0.png');

			console.log("AssetPromises:",AssetPromises);
			Promise.all( AssetPromises );
			let Source = await Pop.LoadFileAsStringAsync('bootup.js');
			Pop.CompileAndRun( Source, 'bootup.js' );
		}

		Bootup().then( e=>Pop.Debug("Finished!",e) ).catch( console.error );
	
	</script>
	
</body>

